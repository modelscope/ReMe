<!doctype html>
<html class="no-js" lang="en" data-content_root="../">
  <head><meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../genindex.html"><link rel="search" title="Search" href="../search.html"><link rel="next" title="Tool Memory Retrieval Operations" href="tool_retrieve_ops.html"><link rel="prev" title="Task Summary Operations" href="../task_memory/task_summary_ops.html">
        <link rel="prefetch" href="../_static/logo.svg" as="image">

    <!-- Generated with Sphinx 8.2.3 and Furo 2025.09.25 -->
        <title>Tool Memory - AgentScope ReMe</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=d75fae25" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=580074bf" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=8dab3a3b" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=7dd80ba7" />
    <link rel="stylesheet" type="text/css" href="../_static/memory-lib/memory-lib.css?v=ed507882" />
    
    


<style>
  body {
    --color-code-background: #f0f0f0;
  --color-code-foreground: black;
  --color-brand-primary: #2196f3;
  --color-brand-content: #2196f3;
  --color-admonition-background: #f8f9fa;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --color-brand-primary: #64b5f6;
  --color-brand-content: #64b5f6;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --color-brand-primary: #64b5f6;
  --color-brand-content: #64b5f6;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle site navigation sidebar">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc" aria-label="Toggle table of contents sidebar">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <span class="icon"><svg><use href="#svg-menu"></use></svg></span>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand"><div style='text-align:center'> <span style='font-weight:700;color:#2196f3;'>AgentScope</span><br> <span style='font-weight:900;color:#ff5722;'>ReMe</span> </div></div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><div class="sidebar-scroll"><a class="sidebar-brand" href="../index.html">
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../_static/logo.svg" alt="Logo"/>
  </div>
  
  <span class="sidebar-brand-text"><div style='text-align:center'> <span style='font-weight:700;color:#2196f3;'>AgentScope</span><br> <span style='font-weight:900;color:#ff5722;'>ReMe</span> </div></span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Setup Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quick_start.html">Quick Start</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Library</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../library/library.html">Memory Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../library/use_library.html">Use Library</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Personal Memory</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../personal_memory/personal_memory.html">Personal Memory</a></li>
<li class="toctree-l1"><a class="reference internal" href="../personal_memory/personal_retrieve_ops.html">Personal Memory Retrieve Ops</a></li>
<li class="toctree-l1"><a class="reference internal" href="../personal_memory/personal_summary_ops.html">Personal Memory Summary Ops</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Task Memory</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../task_memory/task_memory.html">Task Memory</a></li>
<li class="toctree-l1"><a class="reference internal" href="../task_memory/task_retrieve_ops.html">Task Memory Retrieval Operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../task_memory/task_summary_ops.html">Task Summary Operations</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tool Memory</span></p>
<ul class="current">
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Tool Memory</a></li>
<li class="toctree-l1"><a class="reference internal" href="tool_retrieve_ops.html">Tool Memory Retrieval Operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="tool_summary_ops.html">Tool Memory Summary Operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="tool_bench.html">Tool Memory Benchmark</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">SOP Memory</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../sop_memory/making_sop_memories.html">SOP Memory: Combining Atomic Operations into Complex Workflows</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Extensions</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../mcp_quick_start.html">MCP Quick Start Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../vector_store_api_guide.html">🚀 Vector Store API Guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Experiments</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../cookbook/experiment_overview.html">Experiement Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cookbook/frozenlake/quickstart.html">FrozenLake</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cookbook/bfcl/quickstart.html">BFCL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cookbook/appworld/quickstart.html">AppWorld</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Others</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../future_work.html">Future Work</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contribution.html">Contribute to ReMe</a></li>
</ul>

</div>
</div>
      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="https://github.com/modelscope/ReMe/blob/main/docs/tool_memory/tool_memory.md?plain=true" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="tool-memory">
<h1>Tool Memory<a class="headerlink" href="#tool-memory" title="Link to this heading">¶</a></h1>
<section id="background-why-tool-memory">
<h2>1. Background: Why Tool Memory?<a class="headerlink" href="#background-why-tool-memory" title="Link to this heading">¶</a></h2>
<section id="the-mcp-tool-selection-challenge">
<h3>The MCP Tool Selection Challenge<a class="headerlink" href="#the-mcp-tool-selection-challenge" title="Link to this heading">¶</a></h3>
<p>In modern AI agent systems, LLMs face a rapidly expanding ecosystem of MCP (Model Context Protocol) tools. With hundreds or thousands of available tools, a critical problem emerges:</p>
<p><strong>The Core Problem: Tool Description is Not Enough</strong></p>
<p>When an LLM faces numerous MCP tools, it relies heavily on tool descriptions to decide which tool to use and how to use it. However:</p>
<ul class="simple">
<li><p><strong>Ambiguous Descriptions</strong>: Many tools have similar descriptions but different performance characteristics</p></li>
<li><p><strong>Hidden Complexity</strong>: Static descriptions can’t capture runtime behaviors, edge cases, or failure patterns</p></li>
<li><p><strong>Parameter Confusion</strong>: Tools may accept similar parameters with different optimal values</p></li>
<li><p><strong>No Quality Signal</strong>: Descriptions don’t tell you which tools are reliable, fast, or cost-effective</p></li>
</ul>
<p><strong>Example: Web Search Tools</strong></p>
<p>Imagine an LLM choosing between three search tools:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Tool A: &quot;Search the web for information&quot;
Tool B: &quot;Perform web searches with customizable parameters&quot;  
Tool C: &quot;Query search engines and return results&quot;
</pre></div>
</div>
<p>The descriptions are nearly identical, but in reality:</p>
<ul class="simple">
<li><p>Tool A: 95% success rate, avg 2.3s, best for technical queries</p></li>
<li><p>Tool B: 70% success rate, avg 5.8s, often times out with &gt;20 results</p></li>
<li><p>Tool C: 85% success rate, avg 3.1s, good for general queries</p></li>
</ul>
<p><strong>Without historical data, the LLM can’t make informed decisions.</strong></p>
</section>
<section id="the-solution-tool-memory-as-context-enhancement">
<h3>The Solution: Tool Memory as Context Enhancement<a class="headerlink" href="#the-solution-tool-memory-as-context-enhancement" title="Link to this heading">¶</a></h3>
<p>Tool Memory solves this by providing <strong>learned context from historical usage</strong>, transforming static tool descriptions into dynamic, data-driven guidance:</p>
<p><strong>1. Rule-Based Statistics</strong> (Objective Metrics)</p>
<ul class="simple">
<li><p><strong>Success Rate</strong>: “This tool succeeds 92% of the time”</p></li>
<li><p><strong>Performance</strong>: “Average execution time: 2.3s, token cost: 150”</p></li>
<li><p><strong>Usage Patterns</strong>: “Most successful calls use max_results=10-20”</p></li>
</ul>
<p><strong>2. LLM-as-Judge Evaluation</strong> (Qualitative Insights)</p>
<ul class="simple">
<li><p><strong>Quality Assessment</strong>: LLM evaluates each call’s effectiveness</p></li>
<li><p><strong>Pattern Recognition</strong>: Identifies why some calls succeed and others fail</p></li>
<li><p><strong>Actionable Recommendations</strong>: Synthesizes guidelines from patterns</p></li>
</ul>
<p><strong>3. Enhanced Context for LLM Decision-Making</strong></p>
<p>Instead of just a tool description, the LLM now receives:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Tool: web_search

Static Description:
&quot;Search the web for information&quot;

+ Tool Memory Context:
&quot;Based on 150 historical calls:
- Success rate: 92% (138 successful, 12 failed)
- Avg time: 2.3s, Avg tokens: 150
- Best for: Technical documentation, tutorials (95% success)
- Optimal params: max_results=5-20, language=&#39;en&#39;
- Common failures: Generic queries timeout, max_results&gt;50 unreliable
- Recommendation: Use specific multi-word queries with filter_type=&#39;technical_docs&#39;&quot;
</pre></div>
</div>
<p>This enriched context enables the LLM to:</p>
<ul class="simple">
<li><p><strong>Choose the right tool</strong> based on task requirements and reliability</p></li>
<li><p><strong>Use optimal parameters</strong> learned from successful historical calls</p></li>
<li><p><strong>Avoid known pitfalls</strong> that caused previous failures</p></li>
<li><p><strong>Estimate costs</strong> (time and tokens) before execution</p></li>
</ul>
</section>
<section id="the-impact-from-static-descriptions-to-dynamic-intelligence">
<h3>The Impact: From Static Descriptions to Dynamic Intelligence<a class="headerlink" href="#the-impact-from-static-descriptions-to-dynamic-intelligence" title="Link to this heading">¶</a></h3>
<p><strong>Traditional Approach (Static Descriptions Only):</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>LLM: &quot;I have 50 search tools, all with similar descriptions&quot;
→ Random choice or first match
→ Trial-and-error parameter selection
→ 75% success rate, repeated failures
</pre></div>
</div>
<p><strong>Tool Memory Approach (Description + Historical Context):</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>LLM: &quot;I have 50 search tools, but Tool A has 95% success for technical queries&quot;
→ Informed choice based on data
→ Use proven parameter configurations
→ 92% success rate, optimized performance
</pre></div>
</div>
<p><strong>Real-World Impact:</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Before Tool Memory:
- Success rate: 75%
- Average time cost: 5.2s  
- Token cost: 200+ per call
- Repeated parameter errors
- Random tool selection

After Tool Memory:
- Success rate: 92% (+17%)
- Average time cost: 2.8s (-46%)
- Token cost: 150 per call (-25%)
- Consistent best practices
- Data-driven tool selection
</pre></div>
</div>
</section>
<section id="why-this-matters-for-mcp-ecosystem">
<h3>Why This Matters for MCP Ecosystem<a class="headerlink" href="#why-this-matters-for-mcp-ecosystem" title="Link to this heading">¶</a></h3>
<p>As the MCP ecosystem grows, Tool Memory becomes essential:</p>
<ol class="arabic simple">
<li><p><strong>Scalability</strong>: LLMs can navigate thousands of tools with confidence</p></li>
<li><p><strong>Quality Control</strong>: Tools with poor performance get flagged automatically</p></li>
<li><p><strong>Continuous Improvement</strong>: Every call improves the knowledge base</p></li>
<li><p><strong>Transfer Learning</strong>: Insights from one agent benefit all agents in the workspace</p></li>
</ol>
<p><strong>Tool Memory transforms tool descriptions from static documentation into living, learned manuals that improve with every use.</strong></p>
</section>
</section>
<section id="what-is-tool-memory">
<h2>2. What is Tool Memory?<a class="headerlink" href="#what-is-tool-memory" title="Link to this heading">¶</a></h2>
<p>Tool Memory is a structured knowledge base that captures insights from tool usage history. Each Tool Memory represents accumulated wisdom about a specific tool.</p>
<section id="data-structure">
<h3>Data Structure<a class="headerlink" href="#data-structure" title="Link to this heading">¶</a></h3>
<section id="toolmemory">
<h4>ToolMemory<a class="headerlink" href="#toolmemory" title="Link to this heading">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">ToolMemory</span></code> is the core data structure that stores comprehensive information about a tool’s usage patterns:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">ToolMemory</span><span class="p">(</span><span class="n">BaseMemory</span><span class="p">):</span>
    <span class="n">memory_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;tool&quot;</span>                    <span class="c1"># Type identifier</span>
    <span class="n">workspace_id</span><span class="p">:</span> <span class="nb">str</span>                            <span class="c1"># Workspace identifier</span>
    <span class="n">memory_id</span><span class="p">:</span> <span class="nb">str</span>                               <span class="c1"># Unique memory ID</span>
    <span class="n">when_to_use</span><span class="p">:</span> <span class="nb">str</span>                             <span class="c1"># Tool name (serves as unique identifier)</span>
    <span class="n">content</span><span class="p">:</span> <span class="nb">str</span>                                 <span class="c1"># Synthesized usage guidelines</span>
    <span class="n">score</span><span class="p">:</span> <span class="nb">float</span>                                 <span class="c1"># Overall quality score</span>
    <span class="n">time_created</span><span class="p">:</span> <span class="nb">str</span>                            <span class="c1"># Creation timestamp</span>
    <span class="n">time_modified</span><span class="p">:</span> <span class="nb">str</span>                           <span class="c1"># Last modification timestamp</span>
    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>                                  <span class="c1"># Creator (typically LLM model name)</span>
    <span class="n">tool_call_results</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">ToolCallResult</span><span class="p">]</span>      <span class="c1"># Historical invocation records</span>
    <span class="n">metadata</span><span class="p">:</span> <span class="nb">dict</span>                               <span class="c1"># Additional metadata</span>
</pre></div>
</div>
</div>
</div>
<p><strong>Key Fields:</strong></p>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">when_to_use</span></code></strong>: The tool name, used as the unique identifier for retrieval</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">content</span></code></strong>: Human-readable usage guidelines synthesized from historical data</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">tool_call_results</span></code></strong>: Complete history of tool invocations with evaluations</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">score</span></code></strong>: Overall quality metric for the tool’s performance</p></li>
</ul>
</section>
<section id="toolcallresult">
<h4>ToolCallResult<a class="headerlink" href="#toolcallresult" title="Link to this heading">¶</a></h4>
<p>Each tool invocation is captured as a <code class="docutils literal notranslate"><span class="pre">ToolCallResult</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">ToolCallResult</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">create_time</span><span class="p">:</span> <span class="nb">str</span>        <span class="c1"># Invocation timestamp</span>
    <span class="n">tool_name</span><span class="p">:</span> <span class="nb">str</span>          <span class="c1"># Name of the tool</span>
    <span class="nb">input</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="nb">str</span>       <span class="c1"># Input parameters</span>
    <span class="n">output</span><span class="p">:</span> <span class="nb">str</span>             <span class="c1"># Tool output</span>
    <span class="n">token_cost</span><span class="p">:</span> <span class="nb">int</span>         <span class="c1"># Token consumption</span>
    <span class="n">success</span><span class="p">:</span> <span class="nb">bool</span>           <span class="c1"># Whether invocation succeeded</span>
    <span class="n">time_cost</span><span class="p">:</span> <span class="nb">float</span>        <span class="c1"># Time consumed (seconds)</span>
    <span class="n">summary</span><span class="p">:</span> <span class="nb">str</span>            <span class="c1"># Brief summary of the result</span>
    <span class="n">evaluation</span><span class="p">:</span> <span class="nb">str</span>         <span class="c1"># Detailed evaluation (generated by LLM)</span>
    <span class="n">score</span><span class="p">:</span> <span class="nb">float</span>            <span class="c1"># Evaluation score (0.0 for failure, 1.0 for success)</span>
    <span class="n">metadata</span><span class="p">:</span> <span class="nb">dict</span>          <span class="c1"># Additional metadata</span>
</pre></div>
</div>
</div>
</div>
<p><strong>Key Fields:</strong></p>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">input</span></code>/<code class="docutils literal notranslate"><span class="pre">output</span></code></strong>: The complete I/O data for analysis</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">summary</span></code></strong>: LLM-generated brief summary of what happened</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">evaluation</span></code></strong>: LLM-generated detailed analysis of the call quality</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">score</span></code></strong>: Binary evaluation (0.0 = failure, 1.0 = success)</p></li>
<li><p><strong>Performance metrics</strong>: <code class="docutils literal notranslate"><span class="pre">time_cost</span></code>, <code class="docutils literal notranslate"><span class="pre">token_cost</span></code>, <code class="docutils literal notranslate"><span class="pre">success</span></code> for statistical analysis</p></li>
</ul>
</section>
</section>
<section id="tool-memory-lifecycle">
<h3>Tool Memory Lifecycle<a class="headerlink" href="#tool-memory-lifecycle" title="Link to this heading">¶</a></h3>
<pre  class="mermaid">
        graph LR
    A[Tool Call] --&gt; B[Evaluate]
    B --&gt; C[Store Memory]
    C --&gt; D[(Vector Store)]
    D --&gt; E[Agent Retrieves]
    E --&gt; A
    C -.Periodic.-&gt; F[Summarize]
    F --&gt; C
    </pre></section>
</section>
<section id="how-tool-memory-works-the-complete-flow">
<h2>3. How Tool Memory Works: The Complete Flow<a class="headerlink" href="#how-tool-memory-works-the-complete-flow" title="Link to this heading">¶</a></h2>
<p>Tool Memory operates through three complementary operations that work together to create a learning loop:</p>
<pre  class="mermaid">
        graph LR
    A[Agent] --&gt;|1 retrieve_tool_memory| B[(Vector Store)]
    B --&gt;|Guidelines| A
    A --&gt;|2 Execute Tool| C[Tool]
    C --&gt;|Result| A
    A --&gt;|3 add_tool_call_result| D[LLM Evaluate]
    D --&gt;|Store| B
    B --&gt;|Periodic| E[summary_tool_memory]
    E --&gt;|4 Update Guidelines| B
    </pre><section id="operation-flow">
<h3>Operation Flow<a class="headerlink" href="#operation-flow" title="Link to this heading">¶</a></h3>
<p><strong>1. retrieve_tool_memory</strong> (Before Execution)</p>
<ul class="simple">
<li><p>Agent queries: “How should I use <code class="docutils literal notranslate"><span class="pre">web_search</span></code> tool?”</p></li>
<li><p>Retrieves stored guidelines and historical patterns</p></li>
<li><p>Returns: Usage recommendations, parameter suggestions, common pitfalls</p></li>
</ul>
<p><strong>2. Tool Execution</strong></p>
<ul class="simple">
<li><p>Agent executes tool with informed parameters</p></li>
<li><p>Collects: input, output, time_cost, token_cost, success status</p></li>
</ul>
<p><strong>3. add_tool_call_result</strong> (After Execution)</p>
<ul class="simple">
<li><p>Submits execution data for evaluation</p></li>
<li><p>LLM analyzes: Was it successful? What could be improved?</p></li>
<li><p>Generates: summary, evaluation, score (0.0 or 1.0)</p></li>
<li><p>Appends to tool’s historical record in Vector Store</p></li>
</ul>
<p><strong>4. summary_tool_memory</strong> (Periodic)</p>
<ul class="simple">
<li><p>Analyzes recent N tool calls (e.g., last 20-30)</p></li>
<li><p>Calculates statistics: success rate, avg costs, avg score</p></li>
<li><p>LLM synthesizes: Actionable usage guidelines</p></li>
<li><p>Updates the <code class="docutils literal notranslate"><span class="pre">content</span></code> field with comprehensive guidance</p></li>
</ul>
</section>
<section id="example-flow-from-demo">
<h3>Example Flow from Demo<a class="headerlink" href="#example-flow-from-demo" title="Link to this heading">¶</a></h3>
<p>Based on <code class="docutils literal notranslate"><span class="pre">use_tool_memory_demo.py</span></code>, here’s a typical workflow:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Step 1: Add tool call results (accumulate history)</span>
<span class="n">add_tool_call_results</span><span class="p">([</span>
    <span class="p">{</span><span class="s2">&quot;tool_name&quot;</span><span class="p">:</span> <span class="s2">&quot;web_search&quot;</span><span class="p">,</span> <span class="s2">&quot;input&quot;</span><span class="p">:</span> <span class="p">{</span><span class="o">...</span><span class="p">},</span> <span class="s2">&quot;output&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span> <span class="s2">&quot;success&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;tool_name&quot;</span><span class="p">:</span> <span class="s2">&quot;web_search&quot;</span><span class="p">,</span> <span class="s2">&quot;input&quot;</span><span class="p">:</span> <span class="p">{</span><span class="o">...</span><span class="p">},</span> <span class="s2">&quot;output&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span> <span class="s2">&quot;success&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">},</span>
    <span class="c1"># ... more results</span>
<span class="p">])</span>

<span class="c1"># Step 2: Generate usage guidelines (periodic)</span>
<span class="n">summarize_tool_memory</span><span class="p">(</span><span class="s2">&quot;web_search&quot;</span><span class="p">)</span>

<span class="c1"># Step 3: Retrieve guidelines before next use</span>
<span class="n">memory</span> <span class="o">=</span> <span class="n">retrieve_tool_memory</span><span class="p">(</span><span class="s2">&quot;web_search&quot;</span><span class="p">)</span>
<span class="c1"># Returns:</span>
<span class="c1"># &quot;For web_search tool:</span>
<span class="c1">#  - Use max_results=5-20 for optimal performance</span>
<span class="c1">#  - Avoid generic queries, be specific</span>
<span class="c1">#  - Language parameter &#39;en&#39; has 95% success rate</span>
<span class="c1">#  Statistics: 83% success, avg 2.3s, avg 150 tokens&quot;</span>

<span class="c1"># Step 4: Agent uses guidelines for better execution</span>
<span class="n">execute_with_recommended_parameters</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="operation-details-how-to-use-each-component">
<h2>4. Operation Details: How to Use Each Component<a class="headerlink" href="#operation-details-how-to-use-each-component" title="Link to this heading">¶</a></h2>
<section id="add-tool-call-result">
<h3>4.1 <code class="docutils literal notranslate"><span class="pre">add_tool_call_result</span></code><a class="headerlink" href="#add-tool-call-result" title="Link to this heading">¶</a></h3>
<p><strong>Purpose</strong>: Evaluate and store tool call results into Tool Memory.</p>
<p><strong>Flow</strong>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">add_tool_call_result</span><span class="p">:</span>
<span class="w">  </span><span class="nt">flow_content</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">parse_tool_call_result_op &gt;&gt; update_vector_store_op</span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Evaluates</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">adds</span><span class="nv"> </span><span class="s">tool</span><span class="nv"> </span><span class="s">call</span><span class="nv"> </span><span class="s">results</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">tool</span><span class="nv"> </span><span class="s">memory</span><span class="nv"> </span><span class="s">database&quot;</span>
</pre></div>
</div>
<p><strong>Process</strong>:</p>
<ol class="arabic simple">
<li><p>Receives raw tool call results</p></li>
<li><p>Uses LLM to evaluate each call (generates summary, evaluation, score)</p></li>
<li><p>Groups results by tool name</p></li>
<li><p>Creates or updates ToolMemory objects</p></li>
<li><p>Stores in Vector Store</p></li>
</ol>
<p><strong>Configuration</strong> (<code class="docutils literal notranslate"><span class="pre">default.yaml</span></code>):</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">op</span><span class="p">:</span>
<span class="w">  </span><span class="nt">parse_tool_call_result_op</span><span class="p">:</span>
<span class="w">    </span><span class="nt">backend</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">parse_tool_call_result_op</span>
<span class="w">    </span><span class="nt">llm</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
<span class="w">    </span><span class="nt">params</span><span class="p">:</span>
<span class="w">      </span><span class="nt">max_history_tool_call_cnt</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span><span class="w">      </span><span class="c1"># Max calls to retain per tool</span>
<span class="w">      </span><span class="nt">evaluation_sleep_interval</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0</span><span class="w">      </span><span class="c1"># Delay between evaluations (seconds)</span>
</pre></div>
</div>
<section id="usage-with-curl">
<h4>Usage with curl<a class="headerlink" href="#usage-with-curl" title="Link to this heading">¶</a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>http://0.0.0.0:8002/add_tool_call_result<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-d<span class="w"> </span><span class="s1">&#39;{</span>
<span class="s1">    &quot;workspace_id&quot;: &quot;my_workspace&quot;,</span>
<span class="s1">    &quot;tool_call_results&quot;: [</span>
<span class="s1">      {</span>
<span class="s1">        &quot;create_time&quot;: &quot;2025-10-21 10:30:00&quot;,</span>
<span class="s1">        &quot;tool_name&quot;: &quot;web_search&quot;,</span>
<span class="s1">        &quot;input&quot;: {</span>
<span class="s1">            &quot;query&quot;: &quot;Python asyncio tutorial&quot;,</span>
<span class="s1">            &quot;max_results&quot;: 10,</span>
<span class="s1">            &quot;language&quot;: &quot;en&quot;</span>
<span class="s1">        },</span>
<span class="s1">        &quot;output&quot;: &quot;Found 10 relevant results including official docs and tutorials&quot;,</span>
<span class="s1">        &quot;token_cost&quot;: 150,</span>
<span class="s1">        &quot;success&quot;: true,</span>
<span class="s1">        &quot;time_cost&quot;: 2.3</span>
<span class="s1">      },</span>
<span class="s1">      {</span>
<span class="s1">        &quot;create_time&quot;: &quot;2025-10-21 10:32:00&quot;,</span>
<span class="s1">        &quot;tool_name&quot;: &quot;web_search&quot;,</span>
<span class="s1">        &quot;input&quot;: {</span>
<span class="s1">          &quot;query&quot;: &quot;test&quot;,</span>
<span class="s1">          &quot;max_results&quot;: 100,</span>
<span class="s1">          &quot;language&quot;: &quot;unknown&quot;</span>
<span class="s1">        },</span>
<span class="s1">        &quot;output&quot;: &quot;Error: Invalid language parameter&quot;,</span>
<span class="s1">        &quot;token_cost&quot;: 50,</span>
<span class="s1">        &quot;success&quot;: false,</span>
<span class="s1">        &quot;time_cost&quot;: 0.5</span>
<span class="s1">      }</span>
<span class="s1">    ]</span>
<span class="s1">  }&#39;</span>
</pre></div>
</div>
<p><strong>Response</strong>:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;success&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;answer&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Successfully evaluated and stored 2 tool call results&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;memory_list&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;when_to_use&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;web_search&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;memory_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;abc123...&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;tool_call_results&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;tool_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;web_search&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;summary&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Successfully retrieved relevant Python asyncio documentation&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;evaluation&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Good parameter choices with appropriate max_results and language settings&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;score&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span>
<span class="w">            </span><span class="err">...</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;tool_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;web_search&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;summary&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Failed due to invalid language parameter&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;evaluation&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Query too generic and language parameter not supported&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;score&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span>
<span class="w">            </span><span class="err">...</span>
<span class="w">          </span><span class="p">}</span>
<span class="w">        </span><span class="p">]</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">]</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="usage-with-python">
<h4>Usage with Python<a class="headerlink" href="#usage-with-python" title="Link to this heading">¶</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">requests</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span>

<span class="k">def</span><span class="w"> </span><span class="nf">add_tool_call_results</span><span class="p">(</span><span class="n">tool_call_results</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Add tool call results to Tool Memory&quot;&quot;&quot;</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
        <span class="n">url</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">BASE_URL</span><span class="si">}</span><span class="s2">add_tool_call_result&quot;</span><span class="p">,</span>
        <span class="n">json</span><span class="o">=</span><span class="p">{</span>
            <span class="s2">&quot;workspace_id&quot;</span><span class="p">:</span> <span class="n">WORKSPACE_ID</span><span class="p">,</span>
            <span class="s2">&quot;tool_call_results&quot;</span><span class="p">:</span> <span class="n">tool_call_results</span>
        <span class="p">}</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

<span class="c1"># Example: Record a tool invocation</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">add_tool_call_results</span><span class="p">([{</span>
    <span class="s2">&quot;create_time&quot;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2"> %H:%M:%S&quot;</span><span class="p">),</span>
    <span class="s2">&quot;tool_name&quot;</span><span class="p">:</span> <span class="s2">&quot;web_search&quot;</span><span class="p">,</span>
    <span class="s2">&quot;input&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;query&quot;</span><span class="p">:</span> <span class="s2">&quot;Python asyncio&quot;</span><span class="p">,</span> <span class="s2">&quot;max_results&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">},</span>
    <span class="s2">&quot;output&quot;</span><span class="p">:</span> <span class="s2">&quot;Found 10 relevant results...&quot;</span><span class="p">,</span>
    <span class="s2">&quot;token_cost&quot;</span><span class="p">:</span> <span class="mi">150</span><span class="p">,</span>
    <span class="s2">&quot;success&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s2">&quot;time_cost&quot;</span><span class="p">:</span> <span class="mf">2.3</span>
<span class="p">}])</span>
</pre></div>
</div>
</div>
</div>
<p><strong>Complete examples</strong>: See <code class="docutils literal notranslate"><span class="pre">cookbook/simple_demo/use_tool_memory_demo.py</span></code> for full working code.</p>
</section>
</section>
<hr class="docutils" />
<section id="retrieve-tool-memory">
<h3>4.2 <code class="docutils literal notranslate"><span class="pre">retrieve_tool_memory</span></code><a class="headerlink" href="#retrieve-tool-memory" title="Link to this heading">¶</a></h3>
<p><strong>Purpose</strong>: Retrieve usage guidelines and historical data for specific tools.</p>
<p><strong>Flow</strong>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">retrieve_tool_memory</span><span class="p">:</span>
<span class="w">  </span><span class="nt">flow_content</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">retrieve_tool_memory_op</span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Retrieves</span><span class="nv"> </span><span class="s">tool</span><span class="nv"> </span><span class="s">memories</span><span class="nv"> </span><span class="s">from</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">vector</span><span class="nv"> </span><span class="s">database</span><span class="nv"> </span><span class="s">based</span><span class="nv"> </span><span class="s">on</span><span class="nv"> </span><span class="s">tool</span><span class="nv"> </span><span class="s">names&quot;</span>
</pre></div>
</div>
<p><strong>Process</strong>:</p>
<ol class="arabic simple">
<li><p>Takes comma-separated tool names as input</p></li>
<li><p>Searches Vector Store for exact matches (by <code class="docutils literal notranslate"><span class="pre">when_to_use</span></code> field)</p></li>
<li><p>Returns complete ToolMemory objects with:</p>
<ul class="simple">
<li><p>Usage guidelines (<code class="docutils literal notranslate"><span class="pre">content</span></code>)</p></li>
<li><p>Historical call records (<code class="docutils literal notranslate"><span class="pre">tool_call_results</span></code>)</p></li>
<li><p>Statistics and metadata</p></li>
</ul>
</li>
</ol>
<section id="id1">
<h4>Usage with curl<a class="headerlink" href="#id1" title="Link to this heading">¶</a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Retrieve single tool</span>
curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>http://0.0.0.0:8002/retrieve_tool_memory<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-d<span class="w"> </span><span class="s1">&#39;{</span>
<span class="s1">    &quot;workspace_id&quot;: &quot;my_workspace&quot;,</span>
<span class="s1">    &quot;tool_names&quot;: &quot;web_search&quot;</span>
<span class="s1">  }&#39;</span>

<span class="c1"># Retrieve multiple tools (comma-separated)</span>
curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>http://0.0.0.0:8002/retrieve_tool_memory<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-d<span class="w"> </span><span class="s1">&#39;{</span>
<span class="s1">    &quot;workspace_id&quot;: &quot;my_workspace&quot;,</span>
<span class="s1">    &quot;tool_names&quot;: &quot;web_search,database_query,file_processor&quot;</span>
<span class="s1">  }&#39;</span>
</pre></div>
</div>
<p><strong>Response</strong>:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;success&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;answer&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Successfully retrieved 1 tool memories&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;memory_list&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;memory_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tool&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;workspace_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;my_workspace&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;memory_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;abc123...&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;when_to_use&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;web_search&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;content&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;## Usage Guidelines\n\n**Best Practices:**\n- Use max_results between 5-20 for optimal performance\n- Always specify language parameter (en has 95% success rate)\n- Avoid generic single-word queries\n\n**Common Pitfalls:**\n- max_results &gt; 50 often causes timeouts\n- Unknown language values default to &#39;en&#39; with warning\n\n## Statistics\n- **Success Rate**: 83.33%\n- **Average Score**: 0.833\n- **Average Time Cost**: 2.345s\n- **Average Token Cost**: 156.7&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;score&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.85</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;time_created&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2025-10-20 10:00:00&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;time_modified&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2025-10-21 10:35:00&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;author&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;gpt-4&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;tool_call_results&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;create_time&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2025-10-21 10:30:00&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;tool_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;web_search&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;input&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;query&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Python asyncio&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;max_results&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;output&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Found 10 results...&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;summary&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Successfully retrieved relevant documentation&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;evaluation&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Good parameter choices...&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;score&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;token_cost&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">150</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;success&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;time_cost&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">2.3</span>
<span class="w">          </span><span class="p">}</span>
<span class="w">          </span><span class="c1">// ... more historical calls</span>
<span class="w">        </span><span class="p">]</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">]</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="id2">
<h4>Usage with Python<a class="headerlink" href="#id2" title="Link to this heading">¶</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">requests</span>

<span class="k">def</span><span class="w"> </span><span class="nf">retrieve_tool_memory</span><span class="p">(</span><span class="n">tool_names</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Retrieve tool memories by tool names&quot;&quot;&quot;</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
        <span class="n">url</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">BASE_URL</span><span class="si">}</span><span class="s2">retrieve_tool_memory&quot;</span><span class="p">,</span>
        <span class="n">json</span><span class="o">=</span><span class="p">{</span>
            <span class="s2">&quot;workspace_id&quot;</span><span class="p">:</span> <span class="n">WORKSPACE_ID</span><span class="p">,</span>
            <span class="s2">&quot;tool_names&quot;</span><span class="p">:</span> <span class="n">tool_names</span>
        <span class="p">}</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

<span class="c1"># Example: Retrieve and use guidelines</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">retrieve_tool_memory</span><span class="p">(</span><span class="s2">&quot;web_search&quot;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">result</span><span class="p">[</span><span class="s1">&#39;success&#39;</span><span class="p">]:</span>
    <span class="n">memory</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s1">&#39;metadata&#39;</span><span class="p">][</span><span class="s1">&#39;memory_list&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Tool: </span><span class="si">{</span><span class="n">memory</span><span class="p">[</span><span class="s1">&#39;when_to_use&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Guidelines:</span><span class="se">\n</span><span class="si">{</span><span class="n">memory</span><span class="p">[</span><span class="s1">&#39;content&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p><strong>Complete examples</strong>: See <code class="docutils literal notranslate"><span class="pre">cookbook/simple_demo/use_tool_memory_demo.py</span></code> for full working code.</p>
</section>
</section>
<hr class="docutils" />
<section id="summary-tool-memory">
<h3>4.3 <code class="docutils literal notranslate"><span class="pre">summary_tool_memory</span></code><a class="headerlink" href="#summary-tool-memory" title="Link to this heading">¶</a></h3>
<p><strong>Purpose</strong>: Analyze historical tool calls and generate comprehensive usage guidelines.</p>
<p><strong>Flow</strong>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">summary_tool_memory</span><span class="p">:</span>
<span class="w">  </span><span class="nt">flow_content</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">summary_tool_memory_op &gt;&gt; update_vector_store_op</span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Analyzes</span><span class="nv"> </span><span class="s">tool</span><span class="nv"> </span><span class="s">call</span><span class="nv"> </span><span class="s">history</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">generates</span><span class="nv"> </span><span class="s">comprehensive</span><span class="nv"> </span><span class="s">usage</span><span class="nv"> </span><span class="s">patterns&quot;</span>
</pre></div>
</div>
<p><strong>Process</strong>:</p>
<ol class="arabic simple">
<li><p>Retrieves existing ToolMemory by tool name</p></li>
<li><p>Analyzes recent N tool calls (default: 30)</p></li>
<li><p>Calculates statistics:</p>
<ul class="simple">
<li><p>Success rate</p></li>
<li><p>Average score</p></li>
<li><p>Average time cost</p></li>
<li><p>Average token cost</p></li>
</ul>
</li>
<li><p>Uses LLM to synthesize actionable guidelines from call summaries</p></li>
<li><p>Appends statistics to guidelines</p></li>
<li><p>Updates ToolMemory content in Vector Store</p></li>
</ol>
<p><strong>Configuration</strong> (<code class="docutils literal notranslate"><span class="pre">default.yaml</span></code>):</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">op</span><span class="p">:</span>
<span class="w">  </span><span class="nt">summary_tool_memory_op</span><span class="p">:</span>
<span class="w">    </span><span class="nt">backend</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">summary_tool_memory_op</span>
<span class="w">    </span><span class="nt">llm</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
<span class="w">    </span><span class="nt">params</span><span class="p">:</span>
<span class="w">      </span><span class="nt">recent_call_count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30</span><span class="w">               </span><span class="c1"># Number of recent calls to analyze</span>
<span class="w">      </span><span class="nt">summary_sleep_interval</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0</span><span class="w">         </span><span class="c1"># Delay between summaries (seconds)</span>
</pre></div>
</div>
<section id="id3">
<h4>Usage with curl<a class="headerlink" href="#id3" title="Link to this heading">¶</a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Summarize single tool</span>
curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>http://0.0.0.0:8002/summary_tool_memory<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-d<span class="w"> </span><span class="s1">&#39;{</span>
<span class="s1">    &quot;workspace_id&quot;: &quot;my_workspace&quot;,</span>
<span class="s1">    &quot;tool_names&quot;: &quot;web_search&quot;</span>
<span class="s1">  }&#39;</span>

<span class="c1"># Summarize multiple tools (comma-separated)</span>
curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>http://0.0.0.0:8002/summary_tool_memory<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-d<span class="w"> </span><span class="s1">&#39;{</span>
<span class="s1">    &quot;workspace_id&quot;: &quot;my_workspace&quot;,</span>
<span class="s1">    &quot;tool_names&quot;: &quot;web_search,database_query,file_processor&quot;</span>
<span class="s1">  }&#39;</span>
</pre></div>
</div>
<p><strong>Response</strong>:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;success&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;answer&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Successfully summarized 1 tool memories&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;memory_list&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;memory_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tool&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;when_to_use&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;web_search&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;content&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;## Usage Guidelines\n\n**Optimal Parameters:**\n- Set max_results between 5-20 for best balance of coverage and speed\n- Always specify language=&#39;en&#39; for technical queries (95% success rate)\n- Use filter_type=&#39;technical_docs&#39; for development-related searches\n\n**Success Patterns:**\n- Specific, multi-word queries perform significantly better than generic terms\n- Queries with clear intent (e.g., &#39;Python asyncio tutorial&#39;) return high-quality results\n- Technical terms and version numbers improve result relevance\n\n**Common Failures:**\n- Generic single-word queries (e.g., &#39;test&#39;) return poor results\n- max_results &gt; 50 increases timeout risk (5 failures observed)\n- Invalid language codes cause fallback to default with warnings\n\n**Performance Insights:**\n- Typical response time: 1.5-3.5s for successful queries\n- Timeout threshold: 10s (consider simplifying complex queries)\n- Token cost scales with result count: ~150 tokens for 10 results\n\n**Recommendations:**\n1. Always validate language parameter before calling\n2. Start with max_results=10, adjust based on needs\n3. For time-sensitive operations, set timeout &lt; 5s\n4. Monitor token costs for high-frequency usage\n\n## Statistics\n- **Success Rate**: 83.33%\n- **Average Score**: 0.833\n- **Average Time Cost**: 2.345s\n- **Average Token Cost**: 156.7&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;memory_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;abc123...&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;time_modified&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2025-10-21 10:40:00&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="err">...</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">]</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="id4">
<h4>Usage with Python<a class="headerlink" href="#id4" title="Link to this heading">¶</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">requests</span>

<span class="k">def</span><span class="w"> </span><span class="nf">summarize_tool_memory</span><span class="p">(</span><span class="n">tool_names</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generate comprehensive usage guidelines for tools&quot;&quot;&quot;</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
        <span class="n">url</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">BASE_URL</span><span class="si">}</span><span class="s2">summary_tool_memory&quot;</span><span class="p">,</span>
        <span class="n">json</span><span class="o">=</span><span class="p">{</span>
            <span class="s2">&quot;workspace_id&quot;</span><span class="p">:</span> <span class="n">WORKSPACE_ID</span><span class="p">,</span>
            <span class="s2">&quot;tool_names&quot;</span><span class="p">:</span> <span class="n">tool_names</span>
        <span class="p">}</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

<span class="c1"># Example: Generate guidelines</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">summarize_tool_memory</span><span class="p">(</span><span class="s2">&quot;web_search&quot;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">result</span><span class="p">[</span><span class="s1">&#39;success&#39;</span><span class="p">]:</span>
    <span class="n">memory</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s1">&#39;metadata&#39;</span><span class="p">][</span><span class="s1">&#39;memory_list&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Tool: </span><span class="si">{</span><span class="n">memory</span><span class="p">[</span><span class="s1">&#39;when_to_use&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Guidelines:</span><span class="se">\n</span><span class="si">{</span><span class="n">memory</span><span class="p">[</span><span class="s1">&#39;content&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p><strong>Complete examples</strong>: See <code class="docutils literal notranslate"><span class="pre">cookbook/simple_demo/use_tool_memory_demo.py</span></code> for full working code.</p>
</section>
</section>
</section>
<hr class="docutils" />
<section id="best-practices">
<h2>5. Best Practices<a class="headerlink" href="#best-practices" title="Link to this heading">¶</a></h2>
<section id="when-to-record-tool-calls">
<h3>When to Record Tool Calls<a class="headerlink" href="#when-to-record-tool-calls" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><strong>Always</strong>: Record every tool invocation, including failures</p></li>
<li><p><strong>Include</strong>: Complete input parameters, output, and performance metrics</p></li>
<li><p><strong>Timing</strong>: Record immediately after tool execution completes</p></li>
</ul>
</section>
<section id="when-to-generate-summaries">
<h3>When to Generate Summaries<a class="headerlink" href="#when-to-generate-summaries" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><strong>Initial</strong>: After accumulating 20-30 tool calls for meaningful patterns</p></li>
<li><p><strong>Periodic</strong>: Re-summarize every 50-100 new calls or weekly</p></li>
<li><p><strong>Trigger-based</strong>: When success rate drops or patterns change significantly</p></li>
</ul>
</section>
<section id="when-to-retrieve-guidelines">
<h3>When to Retrieve Guidelines<a class="headerlink" href="#when-to-retrieve-guidelines" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><strong>Before first use</strong>: Always retrieve before using an unfamiliar tool</p></li>
<li><p><strong>Before critical operations</strong>: Check latest guidelines for important tasks</p></li>
<li><p><strong>After updates</strong>: Re-retrieve when tool memory has been updated</p></li>
</ul>
</section>
<section id="performance-tuning">
<h3>Performance Tuning<a class="headerlink" href="#performance-tuning" title="Link to this heading">¶</a></h3>
<p><strong>For High-Volume Tools</strong> (&gt;100 calls/day):</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">op</span><span class="p">:</span>
<span class="w">  </span><span class="nt">parse_tool_call_result_op</span><span class="p">:</span>
<span class="w">    </span><span class="nt">params</span><span class="p">:</span>
<span class="w">      </span><span class="nt">max_history_tool_call_cnt</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">200</span><span class="w">      </span><span class="c1"># Keep more history</span>
<span class="w">      </span><span class="nt">evaluation_sleep_interval</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.5</span><span class="w">      </span><span class="c1"># Faster evaluation</span>
<span class="w">  </span>
<span class="w">  </span><span class="nt">summary_tool_memory_op</span><span class="p">:</span>
<span class="w">    </span><span class="nt">params</span><span class="p">:</span>
<span class="w">      </span><span class="nt">recent_call_count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">50</span><span class="w">               </span><span class="c1"># Analyze more calls</span>
</pre></div>
</div>
<p><strong>For Low-Volume Tools</strong> (&lt;20 calls/day):</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">op</span><span class="p">:</span>
<span class="w">  </span><span class="nt">parse_tool_call_result_op</span><span class="p">:</span>
<span class="w">    </span><span class="nt">params</span><span class="p">:</span>
<span class="w">      </span><span class="nt">max_history_tool_call_cnt</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">50</span><span class="w">       </span><span class="c1"># Less history needed</span>
<span class="w">      </span><span class="nt">evaluation_sleep_interval</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0</span><span class="w">      </span><span class="c1"># Standard rate</span>
<span class="w">  </span>
<span class="w">  </span><span class="nt">summary_tool_memory_op</span><span class="p">:</span>
<span class="w">    </span><span class="nt">params</span><span class="p">:</span>
<span class="w">      </span><span class="nt">recent_call_count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">20</span><span class="w">               </span><span class="c1"># Analyze fewer calls</span>
</pre></div>
</div>
</section>
<section id="quality-maintenance">
<h3>Quality Maintenance<a class="headerlink" href="#quality-maintenance" title="Link to this heading">¶</a></h3>
<ol class="arabic simple">
<li><p><strong>Monitor Metrics</strong>:</p></li>
</ol>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>   <span class="n">memory</span> <span class="o">=</span> <span class="n">retrieve_tool_memory</span><span class="p">(</span><span class="s2">&quot;web_search&quot;</span><span class="p">)[</span><span class="s1">&#39;metadata&#39;</span><span class="p">][</span><span class="s1">&#39;memory_list&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
   <span class="n">stats</span> <span class="o">=</span> <span class="n">ToolMemory</span><span class="p">(</span><span class="o">**</span><span class="n">memory</span><span class="p">)</span><span class="o">.</span><span class="n">statistic</span><span class="p">(</span><span class="n">recent_frequency</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
   
   <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Success Rate: </span><span class="si">{</span><span class="n">stats</span><span class="p">[</span><span class="s1">&#39;success_rate&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">.2%</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
   <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Avg Score: </span><span class="si">{</span><span class="n">stats</span><span class="p">[</span><span class="s1">&#39;avg_score&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
   
   <span class="k">if</span> <span class="n">stats</span><span class="p">[</span><span class="s1">&#39;success_rate&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mf">0.7</span><span class="p">:</span>
       <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;⚠️ Low success rate - investigate tool issues&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<ol class="arabic simple" start="2">
<li><p><strong>Clean Old Memories</strong>:</p>
<ul class="simple">
<li><p>Delete tool memories for deprecated tools</p></li>
<li><p>Reset memories when tool behavior changes significantly</p></li>
</ul>
</li>
<li><p><strong>Validate Guidelines</strong>:</p>
<ul class="simple">
<li><p>Periodically review generated guidelines for accuracy</p></li>
<li><p>Test recommended parameters in production scenarios</p></li>
</ul>
</li>
</ol>
</section>
</section>
<section id="memory-management">
<h2>6. Memory Management<a class="headerlink" href="#memory-management" title="Link to this heading">¶</a></h2>
<section id="delete-workspace">
<h3>Delete Workspace<a class="headerlink" href="#delete-workspace" title="Link to this heading">¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>http://0.0.0.0:8002/vector_store<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-d<span class="w"> </span><span class="s1">&#39;{</span>
<span class="s1">    &quot;workspace_id&quot;: &quot;my_workspace&quot;,</span>
<span class="s1">    &quot;action&quot;: &quot;delete&quot;</span>
<span class="s1">  }&#39;</span>
</pre></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">delete_workspace</span><span class="p">(</span><span class="n">workspace_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
        <span class="n">url</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">BASE_URL</span><span class="si">}</span><span class="s2">vector_store&quot;</span><span class="p">,</span>
        <span class="n">json</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;workspace_id&quot;</span><span class="p">:</span> <span class="n">workspace_id</span><span class="p">,</span> <span class="s2">&quot;action&quot;</span><span class="p">:</span> <span class="s2">&quot;delete&quot;</span><span class="p">}</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="dump-memories-to-disk">
<h3>Dump Memories to Disk<a class="headerlink" href="#dump-memories-to-disk" title="Link to this heading">¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>http://0.0.0.0:8002/vector_store<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-d<span class="w"> </span><span class="s1">&#39;{</span>
<span class="s1">    &quot;workspace_id&quot;: &quot;my_workspace&quot;,</span>
<span class="s1">    &quot;action&quot;: &quot;dump&quot;,</span>
<span class="s1">    &quot;path&quot;: &quot;./memory_backup/&quot;</span>
<span class="s1">  }&#39;</span>
</pre></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">dump_memory</span><span class="p">(</span><span class="n">workspace_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;./&quot;</span><span class="p">):</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
        <span class="n">url</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">BASE_URL</span><span class="si">}</span><span class="s2">vector_store&quot;</span><span class="p">,</span>
        <span class="n">json</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;workspace_id&quot;</span><span class="p">:</span> <span class="n">workspace_id</span><span class="p">,</span> <span class="s2">&quot;action&quot;</span><span class="p">:</span> <span class="s2">&quot;dump&quot;</span><span class="p">,</span> <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="n">path</span><span class="p">}</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="load-memories-from-disk">
<h3>Load Memories from Disk<a class="headerlink" href="#load-memories-from-disk" title="Link to this heading">¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>http://0.0.0.0:8002/vector_store<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-d<span class="w"> </span><span class="s1">&#39;{</span>
<span class="s1">    &quot;workspace_id&quot;: &quot;my_workspace&quot;,</span>
<span class="s1">    &quot;action&quot;: &quot;load&quot;,</span>
<span class="s1">    &quot;path&quot;: &quot;./memory_backup/&quot;</span>
<span class="s1">  }&#39;</span>
</pre></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">load_memory</span><span class="p">(</span><span class="n">workspace_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;./&quot;</span><span class="p">):</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
        <span class="n">url</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">BASE_URL</span><span class="si">}</span><span class="s2">vector_store&quot;</span><span class="p">,</span>
        <span class="n">json</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;workspace_id&quot;</span><span class="p">:</span> <span class="n">workspace_id</span><span class="p">,</span> <span class="s2">&quot;action&quot;</span><span class="p">:</span> <span class="s2">&quot;load&quot;</span><span class="p">,</span> <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="n">path</span><span class="p">}</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="complete-working-example">
<h2>7. Complete Working Example<a class="headerlink" href="#complete-working-example" title="Link to this heading">¶</a></h2>
<p>For a complete, runnable example demonstrating the full Tool Memory lifecycle, see:</p>
<p><strong><code class="docutils literal notranslate"><span class="pre">cookbook/simple_demo/use_tool_memory_demo.py</span></code></strong></p>
<p>This demo includes:</p>
<ul class="simple">
<li><p><strong>Workspace management</strong>: Clean, delete, dump, and load operations</p></li>
<li><p><strong>Tool call recording</strong>: Adding 30+ mock tool invocations with various scenarios</p></li>
<li><p><strong>Summarization</strong>: Generating usage guidelines from historical data</p></li>
<li><p><strong>Retrieval</strong>: Fetching and displaying tool memories</p></li>
<li><p><strong>Statistics</strong>: Analyzing success rates, costs, and performance</p></li>
</ul>
<p>Run the demo:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>cookbook/simple_demo
python<span class="w"> </span>use_tool_memory_demo.py
</pre></div>
</div>
<p><strong>Key Workflow Steps:</strong></p>
<ol class="arabic simple">
<li><p><strong>Clean workspace</strong>: Remove existing data</p></li>
<li><p><strong>Add tool calls</strong>: Record 30+ invocations (success/failure scenarios)</p></li>
<li><p><strong>Generate guidelines</strong>: LLM analyzes patterns and creates recommendations</p></li>
<li><p><strong>Retrieve memory</strong>: Get usage guidelines for agent consumption</p></li>
<li><p><strong>Persistence</strong>: Test dump/load operations</p></li>
</ol>
</section>
<section id="advanced-use-cases">
<h2>8. Advanced Use Cases<a class="headerlink" href="#advanced-use-cases" title="Link to this heading">¶</a></h2>
<section id="use-case-1-adaptive-parameter-tuning">
<h3>Use Case 1: Adaptive Parameter Tuning<a class="headerlink" href="#use-case-1-adaptive-parameter-tuning" title="Link to this heading">¶</a></h3>
<p>Retrieve tool memory statistics and adapt parameters based on historical performance:</p>
<ul class="simple">
<li><p>If <code class="docutils literal notranslate"><span class="pre">avg_time_cost</span> <span class="pre">&gt;</span> <span class="pre">5s</span></code>: Increase timeout</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">success_rate</span> <span class="pre">&lt;</span> <span class="pre">80%</span></code>: Enable retry logic</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">avg_token_cost</span></code> high: Reduce result limits</p></li>
</ul>
</section>
<section id="use-case-2-multi-tool-workflow-optimization">
<h3>Use Case 2: Multi-Tool Workflow Optimization<a class="headerlink" href="#use-case-2-multi-tool-workflow-optimization" title="Link to this heading">¶</a></h3>
<p>Retrieve memories for multiple tools at once and optimize workflow order based on:</p>
<ul class="simple">
<li><p>Success rates: Execute reliable tools first</p></li>
<li><p>Time costs: Parallelize slow operations</p></li>
<li><p>Token costs: Budget-aware tool selection</p></li>
</ul>
</section>
<section id="use-case-3-automated-quality-monitoring">
<h3>Use Case 3: Automated Quality Monitoring<a class="headerlink" href="#use-case-3-automated-quality-monitoring" title="Link to this heading">¶</a></h3>
<p>Periodically check tool memory statistics and alert on:</p>
<ul class="simple">
<li><p>Success rate degradation</p></li>
<li><p>Increasing time/token costs</p></li>
<li><p>Unusual failure patterns</p></li>
</ul>
<p><strong>Implementation examples</strong>: See <code class="docutils literal notranslate"><span class="pre">cookbook/simple_demo/use_tool_memory_demo.py</span></code> and the ToolBench evaluation scripts.</p>
</section>
</section>
<section id="benchmark-results">
<h2>9. Benchmark Results<a class="headerlink" href="#benchmark-results" title="Link to this heading">¶</a></h2>
<section id="tool-memory-performance-evaluation">
<h3>Tool Memory Performance Evaluation<a class="headerlink" href="#tool-memory-performance-evaluation" title="Link to this heading">¶</a></h3>
<p>We evaluated Tool Memory effectiveness using a controlled benchmark with three mock search tools, each optimized for different query complexity levels (simple, moderate, complex). The benchmark compares agent performance with and without tool memory guidance across multiple epochs.</p>
<p><strong>Experimental Settings:</strong></p>
<ul class="simple">
<li><p><strong>Model</strong>: Qwen3-30B-Instruct with default parameters</p></li>
<li><p><strong>Task</strong>: Single-turn tool selection and invocation</p></li>
<li><p><strong>Dataset</strong>: 60 training queries + 60 test queries per epoch</p></li>
<li><p><strong>Tools</strong>: 3 mock search tools with varying performance profiles</p></li>
<li><p><strong>Metrics</strong>: Average quality score (0.0-1.0) based on LLM evaluation</p></li>
<li><p><strong>Baseline</strong>: Test set performance without tool memory</p></li>
<li><p><strong>Replication</strong>: Results averaged across 3 independent experimental runs</p></li>
</ul>
<p><strong>Results (averaged across 3 epochs):</strong></p>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Scenario</p></th>
<th class="head"><p>Avg Score</p></th>
<th class="head"><p>Improvement</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Train (No Memory)</p></td>
<td><p>0.650</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-odd"><td><p>Test (No Memory)</p></td>
<td><p>0.672</p></td>
<td><p>Baseline</p></td>
</tr>
<tr class="row-even"><td><p><strong>Test (With Memory)</strong></p></td>
<td><p><strong>0.772</strong></p></td>
<td><p><strong>+14.88%</strong></p></td>
</tr>
</tbody>
</table>
</div>
<p><strong>Key Findings:</strong></p>
<ul class="simple">
<li><p><strong>Consistent improvement</strong>: Tool Memory boosted test performance by ~15% on average</p></li>
<li><p><strong>Knowledge transfer</strong>: Training data successfully informed test-time tool selection</p></li>
<li><p><strong>Stability</strong>: Improvement remained consistent across all 3 epochs (9.90% → 17.39% → 17.13%)</p></li>
</ul>
<p>The benchmark demonstrates that Tool Memory enables agents to make data-driven tool selection decisions, significantly improving task success rates compared to relying solely on static tool descriptions.</p>
<p><strong>Benchmark Resources:</strong></p>
<ul class="simple">
<li><p><strong>Design Documentation</strong>: <a class="reference internal" href="tool_bench.html"><span class="std std-doc"><code class="docutils literal notranslate"><span class="pre">docs/tool_memory/tool_bench.md</span></code></span></a> - Complete benchmark methodology and workflow</p></li>
<li><p><strong>Implementation</strong>: <a class="reference download internal" download="" href="../_downloads/46c5e5cd1294d8da76678d61145d5511/run_reme_tool_bench.py"><span class="xref download myst"><code class="docutils literal notranslate"><span class="pre">cookbook/tool_memory/run_reme_tool_bench.py</span></code></span></a> - Full benchmark script</p></li>
<li><p><strong>Query Dataset</strong>: <a class="reference download internal" download="" href="../_downloads/4d8085627f57a30ec2e92ba18ef54d3a/query.json"><span class="xref download myst"><code class="docutils literal notranslate"><span class="pre">cookbook/tool_memory/query.json</span></code></span></a> - 60 train + 60 test queries across 3 complexity levels</p></li>
</ul>
</section>
</section>
<hr class="docutils" />
<section id="references">
<h2>10. References<a class="headerlink" href="#references" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p><strong>Implementation</strong>: See <code class="docutils literal notranslate"><span class="pre">reme_ai/summary/tool/</span></code> and <code class="docutils literal notranslate"><span class="pre">reme_ai/retrieve/tool/</span></code></p></li>
<li><p><strong>Demo</strong>: <code class="docutils literal notranslate"><span class="pre">cookbook/simple_demo/use_tool_memory_demo.py</span></code></p></li>
<li><p><strong>Benchmark</strong>: <code class="docutils literal notranslate"><span class="pre">cookbook/tool_memory/run_reme_tool_bench.py</span></code></p></li>
<li><p><strong>Schema</strong>: <code class="docutils literal notranslate"><span class="pre">reme_ai/schema/memory.py</span></code></p></li>
<li><p><strong>Utilities</strong>: <code class="docutils literal notranslate"><span class="pre">reme_ai/utils/tool_memory_utils.py</span></code></p></li>
</ul>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./tool_memory"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>
        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="tool_retrieve_ops.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Tool Memory Retrieval Operations</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="../task_memory/task_summary_ops.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Task Summary Operations</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2025, Tongyi Lab, Alibaba Inc.
            </div>
            Made with 
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            <div class="last-updated">
              Last updated on 2025-10-23</div>
          </div>
          <div class="right-details">
            <div class="icons">
              <a class="muted-link " href="https://github.com/modelscope/ReMe" aria-label="GitHub"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16">
    <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path>
</svg>
</a>
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Tool Memory</a><ul>
<li><a class="reference internal" href="#background-why-tool-memory">1. Background: Why Tool Memory?</a><ul>
<li><a class="reference internal" href="#the-mcp-tool-selection-challenge">The MCP Tool Selection Challenge</a></li>
<li><a class="reference internal" href="#the-solution-tool-memory-as-context-enhancement">The Solution: Tool Memory as Context Enhancement</a></li>
<li><a class="reference internal" href="#the-impact-from-static-descriptions-to-dynamic-intelligence">The Impact: From Static Descriptions to Dynamic Intelligence</a></li>
<li><a class="reference internal" href="#why-this-matters-for-mcp-ecosystem">Why This Matters for MCP Ecosystem</a></li>
</ul>
</li>
<li><a class="reference internal" href="#what-is-tool-memory">2. What is Tool Memory?</a><ul>
<li><a class="reference internal" href="#data-structure">Data Structure</a><ul>
<li><a class="reference internal" href="#toolmemory">ToolMemory</a></li>
<li><a class="reference internal" href="#toolcallresult">ToolCallResult</a></li>
</ul>
</li>
<li><a class="reference internal" href="#tool-memory-lifecycle">Tool Memory Lifecycle</a></li>
</ul>
</li>
<li><a class="reference internal" href="#how-tool-memory-works-the-complete-flow">3. How Tool Memory Works: The Complete Flow</a><ul>
<li><a class="reference internal" href="#operation-flow">Operation Flow</a></li>
<li><a class="reference internal" href="#example-flow-from-demo">Example Flow from Demo</a></li>
</ul>
</li>
<li><a class="reference internal" href="#operation-details-how-to-use-each-component">4. Operation Details: How to Use Each Component</a><ul>
<li><a class="reference internal" href="#add-tool-call-result">4.1 <code class="docutils literal notranslate"><span class="pre">add_tool_call_result</span></code></a><ul>
<li><a class="reference internal" href="#usage-with-curl">Usage with curl</a></li>
<li><a class="reference internal" href="#usage-with-python">Usage with Python</a></li>
</ul>
</li>
<li><a class="reference internal" href="#retrieve-tool-memory">4.2 <code class="docutils literal notranslate"><span class="pre">retrieve_tool_memory</span></code></a><ul>
<li><a class="reference internal" href="#id1">Usage with curl</a></li>
<li><a class="reference internal" href="#id2">Usage with Python</a></li>
</ul>
</li>
<li><a class="reference internal" href="#summary-tool-memory">4.3 <code class="docutils literal notranslate"><span class="pre">summary_tool_memory</span></code></a><ul>
<li><a class="reference internal" href="#id3">Usage with curl</a></li>
<li><a class="reference internal" href="#id4">Usage with Python</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#best-practices">5. Best Practices</a><ul>
<li><a class="reference internal" href="#when-to-record-tool-calls">When to Record Tool Calls</a></li>
<li><a class="reference internal" href="#when-to-generate-summaries">When to Generate Summaries</a></li>
<li><a class="reference internal" href="#when-to-retrieve-guidelines">When to Retrieve Guidelines</a></li>
<li><a class="reference internal" href="#performance-tuning">Performance Tuning</a></li>
<li><a class="reference internal" href="#quality-maintenance">Quality Maintenance</a></li>
</ul>
</li>
<li><a class="reference internal" href="#memory-management">6. Memory Management</a><ul>
<li><a class="reference internal" href="#delete-workspace">Delete Workspace</a></li>
<li><a class="reference internal" href="#dump-memories-to-disk">Dump Memories to Disk</a></li>
<li><a class="reference internal" href="#load-memories-from-disk">Load Memories from Disk</a></li>
</ul>
</li>
<li><a class="reference internal" href="#complete-working-example">7. Complete Working Example</a></li>
<li><a class="reference internal" href="#advanced-use-cases">8. Advanced Use Cases</a><ul>
<li><a class="reference internal" href="#use-case-1-adaptive-parameter-tuning">Use Case 1: Adaptive Parameter Tuning</a></li>
<li><a class="reference internal" href="#use-case-2-multi-tool-workflow-optimization">Use Case 2: Multi-Tool Workflow Optimization</a></li>
<li><a class="reference internal" href="#use-case-3-automated-quality-monitoring">Use Case 3: Automated Quality Monitoring</a></li>
</ul>
</li>
<li><a class="reference internal" href="#benchmark-results">9. Benchmark Results</a><ul>
<li><a class="reference internal" href="#tool-memory-performance-evaluation">Tool Memory Performance Evaluation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#references">10. References</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../_static/documentation_options.js?v=a8e58a58"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/furo.js?v=46bd48cc"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script type="module" src="https://cdn.jsdelivr.net/npm/mermaid@11.2.0/dist/mermaid.esm.min.mjs"></script>
    <script type="module" src="https://cdn.jsdelivr.net/npm/@mermaid-js/layout-elk@0.1.4/dist/mermaid-layout-elk.esm.min.mjs"></script>
    <script type="module">import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@11.2.0/dist/mermaid.esm.min.mjs";import elkLayouts from "https://cdn.jsdelivr.net/npm/@mermaid-js/layout-elk@0.1.4/dist/mermaid-layout-elk.esm.min.mjs";mermaid.registerLayoutLoaders(elkLayouts);mermaid.initialize({startOnLoad:false});</script>
    <script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script>
    <script type="module">
import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@11.2.0/dist/mermaid.esm.min.mjs";
window.addEventListener("load", () => mermaid.run());
</script>
    <script src="../_static/language.js"></script>
    <script src="../_static/memory-lib/memory-lib.js?v=d34abfda"></script>
    </body>
</html>